
## RDB vs NoSQL

>SQL = Structured Query Language

##### RDBMS
-  SQL 쿼리 언어를 사용한다.
-  테이블마다 스키마(Schema)를 정의해야한다.
-  데이터 타입과 제약으로 데이터의 정확성이 보장된다.
-  속도보다 트랜잭션 시의 ACID가 중요하다.
-  수직적 확장(Scale up)에 적합하다.
-  데이터 중복이 없어 쓰기 속도가 빠르다.
-  MySQL, Oracle, MariaDB, SQL Server 등이 있다.

##### NoSQL
: Not Only SQL
-  SQL 쿼리 언어를 사용하지 않는다.
-  스키마를 반드시 정의하지 않아도 된다.(Schema-less)
-  사용 목적에 따라 ACID가 중요하지 않을 수 있다.
-  RDB의 확장성 이슈를 해결하기 위해 나온 데이터베이스 모델이다.
-  key-value방식으로 데이터를 관리한다.
-  수평적 확장(Scale out)에 적합하다.
-  데이터 중복이 가능해 읽기 속도가 빠르다.
-  Undo와 Redo를 제공하지 않는다.
-  트렌잭션 관리가 안된다.
-  MongoDB, Redis 등이 있다.

<br>

## Storae Engine 

: 스토리지 엔진 (=Database Engine)

-  데이터베이스의 심장과도 같은 역할
-  DBMS가 데이터베이스에 대해 데이터 CRUD를 하는 데에 사용하는 기본 소프트웨어 컴포넌트
-  DB에서 데이터를 어떠한 방식으로 저장하고 접근할 것인지에 대한 기능을 제공함
-  스토리지엔진의 특성에 따라 데이터 접근이 얼마나 빠른지, 얼마나 안정적인지, 트랜잭션 등의 기능을 제공하는지 등의 차이점 발생

<br>

## 1. MySQL

: 대부분의 운영체제와 호환되며, 현재 가장 많이 사용되는 데이터베이스

- C, C++로 만들어짐
- MyISAM 인덱스 압축 기술
- B-tree 기반의 인덱스
- 스레드 기반의 메모리 할당 시스템
- 매우 빠른 조인
- 최대 64개의 인덱스
- 대용량 데이터베이스를 위해 설계되어 있음
- 롤백, 커밋, 이중 암호 지원 보안 등의 기능을 제공함

#### MySQL Storage Engine

![[Pasted image 20230312001535.png]]
-  MySQL 스토리지 엔진은 모듈식 아키텍처로, 쉽게 스토리지 엔진을 바꿀 수 있으며 데이터 웨어하우징, 트랜잭션 처리, 고가용성 처리에 강점을 두고 있다.
- 스토리지 엔진 위에는 커넥터 API 및 서비스 계층을 통해 MySQL 데이터베이스와 쉽게 상호 작용할 수 있다.

**종류**
- **MyISAM**
    - MySQL5.5 버전 이전의 기본 스토리지 엔진
    - 기본적인 기능을 제공하여 상대적으로 가벼움
    - 더 이상 사용할 수 없는 구형 ISAM스토리지 엔진을 기반으로 하지만 유용한 확장 기능이 있음
    - **트랜잭션 처리가 필요 없음
    - **Read only 기능이 많은 서비스일수록 효율적**. 대신 write가 많은 서비스에서 불리함
    - 테이블과 인덱스를 별도의 파일로 저장

- **InnoDB**
    - 많은 기능을 제공하여 상대적으로 무거움
    - Row level locking 지원으로 INSERT,UPDATE,DELETE에 유리함. 특히, write가 많은 서비스에서 유리함
    - 테이블과 인덱스를 테이블 스페이스에 저장
    - **트랜잭션 처리가 필요**함
    - **대용량의 데이터를 다루는 부분에서** 효율적임

- **Cluster** (NDB)
    - 트랜잭션을 지원
    - 모든 데이터와 인덱스가 메모리에 존재하여 매우 빠른 데이터 로드 속도를 자랑함
    - PK 사용시 최상의 속도를 냄

- **Archive**
    - MySQL 5.0부터 새롭게 도입된 엔진
    - 작은 풋 프린트에서 인덱싱되지 않은 많은 양의 데이터를 저장함
    - 자동적으로 데이터 압축을 지원하며 다른 엔진에 비해 80% 저장공간 절약 효과가 있음
    - 가장 빠른 데이터 로드 속도가 장점
    - 단, INSERT와 SELECT만이 가능함

- **Federated**
    - MySQL 5.0부터 새롭게 도입된 엔진
    - 물리적 데이터베이스에 대한 논리적 데이터베이스를 생성하여 원격 데이터를 컨트롤 할 수 있음
    - 실행속도는 네트워크 요소에 따라 좌우되며, 테이블 정의를 통한 SSL 보안 처리를 함
    - 분산 데이터베이스 환경에 사용함

<br>

## 2. PostgreSQL

**특징**
- MySQL 다음으로 개발자들이 선호하는 데이터베이스 기술
- VACUUM : 디스크 조각이 차지하는 영역을 회수할 수 있는 장치
- 최대 테이블의 크기는 32TB
- ORDBMS (객체-관계형 데이터베이스 시스템) : SQL 뿐만 아니라 JSON을 이용해서 데이터에 접근할 수 있음
- 지정 시간에 복구하는 기능, 로깅, 접근 제어, 중첩된 트랜잭션, 백업 등을 할 수 있음

<br>

## 3. MongoDB

- JSON을 통해 데이터에 접근할 수 있고, Binary JSON 형태(BSON)로 데이터가 저장됨
- 와이어드 타이거 엔진이 기본 스토리지 엔진으로 장착된 키-값 데이터 모델에서 확장된 도큐먼트 기반의 데이터베이스
- 확장성이 뛰어남
- 빅데이터를 저장할 때 성능이 좋음
- 고가용성, 샤딩＊, 레플리카셋을 지원함
- 스키마를 정해놓지 않고 데이터 삽입 가능 - 다양한 도메인의 데이터베이스를 기반으로 분석하거나, 로깅 등을 구현할 때 강점을 보임
-  도큐먼트를 생성할 때마다 ObjectID가 생성됨

    > ObjectID : 다른 컬렉션에서 중복된 값을 지니기 힘든 유니크한 값
    > ![[Pasted image 20230312005143.png]]
    > - 기본키
    > - 유닉스 시간 기반의 타임스탬프(4바이트), 랜덤 값(5바이트), 카운터(3바이트)로 이루어져 있음

    > **📌 샤딩**
    > : 큰 부분에서 작게 나누는 것
      - **데이터 분산** - 데이터를 분산하여 순차적으로 저장한다면 한 대 이상에서 트래픽을 감당하기 때문에 부하를 분산하는 효과 있음
      - **백업과 복구 전략** - 미리 데이터를 분산하여 저 정해둔다면 리스크로부터 보호받고 효과적인 시스템 운영이 가능해짐
      - **빠른 성능** - 여러 대의 독립된 프로세스가 병렬로 작업을 동시에 수행하기 때문에 이상적으로 빠른 처리 성능 보장

<br>

## 4. Redis

: 인메모리 데이터베이스, 키-값 데이터 모델 기반의 데이터베이스

- 기본 데이터 타입 : String
- 최대 512MB까지 저장 가능
- set, hash 등을 지원함
- pub/sub 기능을 통해 채팅 시스템, 다른 데이터베이스 앞단에 두어 사용하는 캐싱 계층, 단순히 키-값이 필요한 세션 정보 관리, sorted set 자료  구조를 이용한 실시간 순위표 서비스에 사용함